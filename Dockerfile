# PULL kali:latest
FROM kalilinux/kali-rolling

# install dependencies from requirements.txt
COPY requirements.txt /tmp/requirements.txt
RUN apt-get update && apt-get install -y $(cat /tmp/requirements.txt)

# copy the files from ./bin/ to /bin/
# folder contains custom binaries
COPY bin/ /bin/
RUN chmod +x /bin/*

# copy the files from ./lib/ to /lib/
# folder contains custom libraries
COPY lib/ /lib/

# copy the files from ./etc/ to /etc/
# folder contains custom configurations and 
COPY etc/ /etc/

# copy the files from ./opt/ to /opt/
# folder contains custom files, mainly wordlists
COPY opt/ /opt/

# create a new folder, preferrably: /root/ctf
RUN mkdir /root/ctf

# copy the files from ./root/ctf/ to /root/ctf
COPY root/ctf/ /root/ctf/

# expose port 80 to 80 on the host
EXPOSE 8000

LABEL maintainer='abhinav555k@gmail.com'

WORKDIR /root/ctf

COPY ./entrypoint.sh /

# ENTRYPOINT ["/entrypoint.sh"]